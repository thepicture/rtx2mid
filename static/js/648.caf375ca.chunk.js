"use strict";(self.webpackChunkrtx2mid=self.webpackChunkrtx2mid||[]).push([[648],{7252:function(t,e,n){n.d(e,{Bx:function(){return m},Dv:function(){return d},RE:function(){return o},RG:function(){return s},W$:function(){return v},bG:function(){return a},lK:function(){return u},nr:function(){return p},sH:function(){return l},w7:function(){return c},y4:function(){return h},zu:function(){return f}});var r=n(3144),i=n(5671),o=(0,r.Z)((function t(){(0,i.Z)(this,t)}));o.HEADER=0,o.NOTE=1,o.SCALE=2,o.STYLE=3,o.TEMPO=4,o.VOLUME=5;var a=(0,r.Z)((function t(){(0,i.Z)(this,t)}));a.PAUSE=-1;var c={c:0,"c#":1,d:2,"d#":3,e:4,f:5,"f#":6,g:7,"g#":8,a:9,"a#":10,h:11,p:0},s={"00000":25,"00001":28,"00010":31,"00011":35,"00100":40,"00101":45,"00110":50,"00111":56,"01000":63,"01001":70,"01010":80,"01011":90,"01100":100,"01101":112,"01110":125,"01111":140,1e4:160,10001:180,10010:200,10011:225,10100:250,10101:285,10110:320,10111:355,11e3:400,11001:450,11010:500,11011:565,11100:635,11101:715,11110:800,11111:900},u={"0000":"p","0001":"c","0010":"c#","0011":"d","0100":"d#","0101":"e","0110":"f","0111":"f#",1e3:"g",1001:"g#",1010:"a",1011:"a#",1100:"h"},l={"00":1,"01":2,10:3,11:4},d={"000":"1","001":"2","010":"4","011":"8",100:"16",101:"32"},f={"00":"no special duration","01":"dotted note",10:"double dotted note",11:"2/3 length"},p=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substring(n,n+2),16));return e},h=/.{2}/g,v=6e7,m={type:"audio/midi"}},8067:function(t,e,n){n.d(e,{p:function(){return a}});var r=n(5671),i=n(3144),o=n(7252),a=function(){function t(){(0,r.Z)(this,t),this.patternHeader=void 0,this.commandLength=void 0,this.ringingToneProgramming=void 0,this.sound=void 0,this.basicSongType=void 0,this.songSequenceLength=void 0,this.patternId=void 0,this.loopValue=void 0,this.patternSpecifier=void 0}return(0,i.Z)(t,[{key:"convertToRtttl",value:function(t){var e=0;if(this.commandLength=t.slice(e,e+8),e+=8,this.ringingToneProgramming=t.slice(e,e+8),e+=8,this.sound=t.slice(e,e+7),e+=7,this.basicSongType=t.slice(e,e+3),"001"!==this.basicSongType)throw new Error("expected basic song type 001, got ".concat(this.basicSongType));e+=3;var n=parseInt(t.slice(e,e+4),2);e+=4;var r=t.slice(e,e+8*n).match(/.{8}/g).map((function(t){return String.fromCharCode(parseInt(t,2))})).join("");e+=8*n,this.songSequenceLength=t.slice(e,e+8),e+=8,this.patternHeader=t.slice(e,e+3),e+=3,this.patternId=t.slice(e,e+2),e+=2,this.loopValue=Boolean(parseInt(t.slice(e,e+4),2)),e+=4,this.patternSpecifier=t.slice(e,e+8);for(var i=[],a=e+=8;a<t.length&&t.slice(a,a+7)!=="0".repeat(7);){var c=parseInt(t.slice(a,a+3),2);a+=3,c===o.RE.NOTE?(i.push({id:c,note:o.lK[t.slice(a,a+4)],duration:o.Dv[t.slice(a+4,a+4+3)],durationSpecifier:o.zu[t.slice(a+4+3,a+4+3+2)]}),a+=9):c===o.RE.SCALE?(i.push({id:c,scale:o.sH[t.slice(a,a+2)]}),a+=2):c===o.RE.TEMPO?(i.push({id:c,tempo:o.RG[t.slice(a,a+5)]}),a+=5):c===o.RE.STYLE?a+=2:c===o.RE.VOLUME&&(a+=4)}for(var s="".concat(r,":d=8,o=4,b=").concat(i.find((function(t){return"undefined"!==typeof t.tempo})).tempo||63,":"),u=[],l=1,d=0,f=i;d<f.length;d++){var p=f[d];p.id===o.RE.NOTE?u.push("".concat(p.duration).concat(p.note).concat("p"===p.note?"":l+3).concat("dotted note"===p.durationSpecifier?".":"")):p.id===o.RE.SCALE&&(l=p.scale)}return s+u.join(",")}},{key:"digestToFile",value:function(t){return new File([new Uint8Array(t.split("").map((function(t){return t.charCodeAt(0)})))],this.generateFilename(),o.Bx)}},{key:"generateFilename",value:function(){return"rtx2rtttl_".concat(Date.now().toString(),".rtttl")}}]),t}()},9916:function(t,e,n){n.r(e);var r=n(1413),i=n(4165),o=n(5861),a=n(9439),c=n(2791),s=n(6776),u=n(3403),l=n(5794),d=n(7721),f=n(7629),p=n(8067),h=n(184),v={labelCol:{span:6},wrapperCol:{span:14}};e.default=function(){var t=(0,c.useState)(!1),e=(0,a.Z)(t,2),n=e[0],m=e[1],g=(0,c.useState)(""),x=(0,a.Z)(g,2),E=x[0],S=x[1],Z=function(t){var e=document.createElement("a"),n=URL.createObjectURL(t);e.download=t.name,e.href=n,e.click(),requestAnimationFrame((function(){return URL.revokeObjectURL(n)}))},y=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var n,r,o,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e.arrayBuffer();case 3:return t.t1=t.sent,n=new t.t0(t.t1),r=Array.from(n).map((function(t){return t.toString(2).padStart(8,"0")})).join(""),o=new p.p,a=o.convertToRtttl(r),t.abrupt("return",o.digestToFile(a));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!1),t.prev=1,t.next=4,y(e);case 4:n=t.sent,Z(n),S("Conversion successful!"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),S("File is neither not a .rtl nor .mid that conforms to Nokia Ringtone Format");case 12:m(!0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return(0,h.jsx)(f._,{children:(0,h.jsx)(u.Z,{content:E,title:"Result",open:n,children:(0,h.jsx)(l.Z,(0,r.Z)((0,r.Z)({name:"convert-rtx"},v),{},{style:{maxWidth:600},children:(0,h.jsx)(l.Z.Item,{label:"Convert",children:(0,h.jsx)(l.Z.Item,{name:"dragger",valuePropName:"fileList",noStyle:!0,getValueFromEvent:function(t){var e=t.file;b(e)},children:(0,h.jsxs)(d.Z.Dragger,{name:"files",maxCount:1,beforeUpload:function(){return!1},children:[(0,h.jsx)("p",{className:"ant-upload-drag-icon",children:(0,h.jsx)(s.Z,{})}),(0,h.jsx)("p",{className:"ant-upload-text",children:"Select a melody to convert"}),(0,h.jsx)("p",{className:"ant-upload-hint",children:"Should be .rtl or .mid"})]})})})}))})})}},7629:function(t,e,n){n.d(e,{_:function(){return a}});var r=n(9205),i=n(3099),o=n(184),a=function(t){var e=t.children;return(0,o.jsx)(r.Z,{title:"Conversion Menu",children:(0,o.jsx)(i.Z,{direction:"horizontal",style:{width:"100%",justifyContent:"center"},children:e})})}}}]);
//# sourceMappingURL=648.caf375ca.chunk.js.map